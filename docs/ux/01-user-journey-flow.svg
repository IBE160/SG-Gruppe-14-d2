<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <defs>
    <style>
      .title { font: bold 24px sans-serif; fill: #1F2937; }
      .subtitle { font: 14px sans-serif; fill: #6B7280; }
      .box { fill: #FFFFFF; stroke: #2563EB; stroke-width: 2; }
      .box-success { fill: #DCFCE7; stroke: #16A34A; stroke-width: 2; }
      .box-error { fill: #FEE2E2; stroke: #DC2626; stroke-width: 2; }
      .box-process { fill: #DBEAFE; stroke: #2563EB; stroke-width: 2; }
      .text { font: 14px sans-serif; fill: #1F2937; text-anchor: middle; }
      .text-small { font: 12px sans-serif; fill: #6B7280; text-anchor: middle; }
      .arrow { stroke: #2563EB; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-success { stroke: #16A34A; stroke-width: 2; fill: none; marker-end: url(#arrowhead-success); }
      .arrow-error { stroke: #DC2626; stroke-width: 2; fill: none; marker-end: url(#arrowhead-error); }
      .decision { fill: #FEF3C7; stroke: #F59E0B; stroke-width: 2; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2563EB" />
    </marker>
    <marker id="arrowhead-success" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#16A34A" />
    </marker>
    <marker id="arrowhead-error" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#DC2626" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="600" y="35" class="title">Brukerreise: Nye Hædda Barneskole Simulator</text>
  <text x="600" y="55" class="subtitle">Fullstendig arbeidsflyt fra innlogging til planlegging</text>

  <!-- 1. Login -->
  <rect x="50" y="100" width="140" height="80" rx="8" class="box"/>
  <text x="120" y="135" class="text">1. Innlogging</text>
  <text x="120" y="155" class="text-small">Supabase Auth</text>
  <text x="120" y="170" class="text-small">E-post/Passord</text>

  <!-- Arrow to Dashboard -->
  <path d="M 190 140 L 280 140" class="arrow"/>

  <!-- 2. Dashboard -->
  <rect x="280" y="100" width="180" height="80" rx="8" class="box-process"/>
  <text x="370" y="130" class="text">2. Dashbord</text>
  <text x="370" y="150" class="text-small">Budsjett: 0/700 MNOK</text>
  <text x="370" y="165" class="text-small">WBS: 0/15 fullført</text>

  <!-- Arrow to WBS Selection -->
  <path d="M 370 180 L 370 230" class="arrow"/>

  <!-- 3. Select WBS Item -->
  <rect x="290" y="230" width="160" height="70" rx="8" class="box"/>
  <text x="370" y="260" class="text">3. Velg WBS-oppgave</text>
  <text x="370" y="280" class="text-small">F.eks. "Grunnarbeid"</text>

  <!-- Arrow to Supplier Selection -->
  <path d="M 370 300 L 370 350" class="arrow"/>

  <!-- 4. Select Supplier -->
  <rect x="290" y="350" width="160" height="70" rx="8" class="box"/>
  <text x="370" y="380" class="text">4. Velg Leverandør</text>
  <text x="370" y="400" class="text-small">Åpne chat-vindu</text>

  <!-- Arrow to Negotiation -->
  <path d="M 450 385 L 540 385" class="arrow"/>

  <!-- 5. Negotiation Loop -->
  <rect x="540" y="330" width="200" height="110" rx="8" class="box-process"/>
  <text x="640" y="360" class="text" font-weight="bold">5. Forhandling (AI)</text>
  <text x="640" y="380" class="text-small">Initial tilbud: Høy pris</text>
  <text x="640" y="395" class="text-small">Bruker argumenterer</text>
  <text x="640" y="410" class="text-small">AI justerer ned</text>
  <text x="640" y="425" class="text-small">Aksepter tilbud</text>

  <!-- Arrow to Decision: More items? -->
  <path d="M 640 440 L 640 500" class="arrow"/>

  <!-- 6. Decision: More WBS items? -->
  <polygon points="640,500 740,540 640,580 540,540" class="decision"/>
  <text x="640" y="540" class="text-small">Flere WBS-</text>
  <text x="640" y="555" class="text-small">oppgaver?</text>

  <!-- YES - Loop back -->
  <path d="M 540 540 L 370 540 L 370 300" class="arrow"/>
  <text x="450" y="530" class="text-small" fill="#2563EB">Ja</text>

  <!-- NO - Continue to validation -->
  <path d="M 740 540 L 870 540" class="arrow"/>
  <text x="800" y="530" class="text-small" fill="#2563EB">Nei (15/15)</text>

  <!-- 7. Submit Plan -->
  <rect x="870" y="510" width="140" height="60" rx="8" class="box"/>
  <text x="940" y="535" class="text">7. Send Inn Plan</text>
  <text x="940" y="555" class="text-small">Validering...</text>

  <!-- Arrow to Validation -->
  <path d="M 940 570 L 940 630" class="arrow"/>

  <!-- 8. Validation Decision -->
  <polygon points="940,630 1040,670 940,710 840,670" class="decision"/>
  <text x="940" y="665" class="text-small">Budsjett ≤ 700M</text>
  <text x="940" y="680" class="text-small">Dato ≤ 15. mai 2026?</text>

  <!-- FAIL - Error Modal -->
  <path d="M 840 670 L 730 670" class="arrow-error"/>
  <rect x="560" y="640" width="170" height="60" rx="8" class="box-error"/>
  <text x="645" y="665" class="text" fill="#DC2626">❌ Feil</text>
  <text x="645" y="685" class="text-small">Forhandl på nytt</text>
  <path d="M 560 670 L 370 670 L 370 300" class="arrow-error" stroke-dasharray="5,5"/>

  <!-- SUCCESS - Success Modal -->
  <path d="M 1040 670 L 1110 670" class="arrow-success"/>
  <rect x="1010" y="640" width="170" height="120" rx="8" class="box-success"/>
  <text x="1095" y="670" class="text" fill="#16A34A" font-size="18">✅ Suksess!</text>
  <text x="1095" y="695" class="text-small">Plan godkjent</text>
  <text x="1095" y="715" class="text-small">Budsjett: 695/700 MNOK</text>
  <text x="1095" y="730" class="text-small">Dato: 10. april 2026</text>
  <text x="1095" y="750" class="text-small">Eksporter plan</text>

  <!-- Legend -->
  <rect x="50" y="720" width="15" height="15" class="box-process"/>
  <text x="75" y="732" class="text-small" text-anchor="start">Hovedprosess</text>

  <rect x="200" y="720" width="15" height="15" class="decision"/>
  <text x="225" y="732" class="text-small" text-anchor="start">Beslutning</text>

  <rect x="330" y="720" width="15" height="15" class="box-success"/>
  <text x="355" y="732" class="text-small" text-anchor="start">Suksess</text>

  <rect x="450" y="720" width="15" height="15" class="box-error"/>
  <text x="475" y="732" class="text-small" text-anchor="start">Feil/Gjenta</text>
</svg>