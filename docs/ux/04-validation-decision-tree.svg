<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900">
  <defs>
    <style>
      .title { font: bold 22px sans-serif; fill: #1F2937; }
      .subtitle { font: 14px sans-serif; fill: #6B7280; }
      .text { font: 13px sans-serif; fill: #1F2937; text-anchor: middle; }
      .text-small { font: 11px sans-serif; fill: #6B7280; text-anchor: middle; }
      .box-start { fill: #DBEAFE; stroke: #2563EB; stroke-width: 2; }
      .box-check { fill: #FEF3C7; stroke: #F59E0B; stroke-width: 2; }
      .box-success { fill: #DCFCE7; stroke: #16A34A; stroke-width: 3; }
      .box-error { fill: #FEE2E2; stroke: #DC2626; stroke-width: 2; }
      .arrow-success { stroke: #16A34A; stroke-width: 3; fill: none; marker-end: url(#arrow-success); }
      .arrow-error { stroke: #DC2626; stroke-width: 3; fill: none; marker-end: url(#arrow-error); }
      .arrow-neutral { stroke: #6B7280; stroke-width: 2; fill: none; marker-end: url(#arrow-neutral); }
      .label-success { font: bold 13px sans-serif; fill: #16A34A; }
      .label-error { font: bold 13px sans-serif; fill: #DC2626; }
    </style>
    <marker id="arrow-success" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
      <polygon points="0 0, 12 3, 0 6" fill="#16A34A" />
    </marker>
    <marker id="arrow-error" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
      <polygon points="0 0, 12 3, 0 6" fill="#DC2626" />
    </marker>
    <marker id="arrow-neutral" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#6B7280" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="600" y="40" class="title" text-anchor="middle">Planvalideringsprosess</text>
  <text x="600" y="65" class="subtitle" text-anchor="middle">Beslutningstresystem for budsjett- og tidsfristkontroll</text>

  <!-- Start: User submits plan -->
  <rect x="450" y="100" width="300" height="80" rx="12" class="box-start"/>
  <text x="600" y="135" class="text" font-weight="bold">Bruker klikker</text>
  <text x="600" y="155" class="text" font-weight="bold">"Send Inn Plan"</text>
  <text x="600" y="173" class="text-small">Alle 15 WBS-oppgaver fylt ut</text>

  <!-- Arrow down -->
  <path d="M 600 180 L 600 230" class="arrow-neutral"/>

  <!-- Check 1: All items complete? -->
  <polygon points="600,230 750,300 600,370 450,300" class="box-check"/>
  <text x="600" y="295" class="text">Alle WBS-oppgaver</text>
  <text x="600" y="313" class="text">har data?</text>

  <!-- NO path - Error 1 -->
  <path d="M 450 300 L 280 300" class="arrow-error"/>
  <text x="360" y="290" class="label-error">NEI</text>
  <rect x="50" y="260" width="230" height="80" rx="8" class="box-error"/>
  <text x="165" y="290" class="text" fill="#DC2626" font-weight="bold">❌ Feil: Ufullstendig</text>
  <text x="165" y="310" class="text-small">Manglende WBS-oppgaver:</text>
  <text x="165" y="328" class="text-small">1.4.3, 1.5.2, 1.6.1</text>

  <!-- YES path - Continue -->
  <path d="M 600 370 L 600 430" class="arrow-success"/>
  <text x="620" y="405" class="label-success">JA</text>

  <!-- Check 2: Budget validation -->
  <polygon points="600,430 750,500 600,570 450,500" class="box-check"/>
  <text x="600" y="490" class="text">Total kostnad</text>
  <text x="600" y="508" class="text">≤ 700 MNOK?</text>
  <text x="600" y="530" class="text-small">(Summerer alle WBS-kostnader)</text>

  <!-- NO path - Error 2 -->
  <path d="M 450 500 L 280 500" class="arrow-error"/>
  <text x="360" y="490" class="label-error">NEI</text>
  <rect x="50" y="460" width="230" height="100" rx="8" class="box-error"/>
  <text x="165" y="490" class="text" fill="#DC2626" font-weight="bold">❌ Feil: Overbudsjett</text>
  <text x="165" y="510" class="text-small">Total: 715 MNOK</text>
  <text x="165" y="528" class="text-small">Budsjett: 700 MNOK</text>
  <text x="165" y="546" class="text-small" font-weight="bold">Overskridelse: +15 MNOK</text>

  <!-- YES path - Continue -->
  <path d="M 600 570 L 600 630" class="arrow-success"/>
  <text x="620" y="605" class="label-success">JA</text>

  <!-- Check 3: Deadline validation -->
  <polygon points="600,630 750,700 600,770 450,700" class="box-check"/>
  <text x="600" y="690" class="text">Sluttdato</text>
  <text x="600" y="708" class="text">≤ 15. mai 2026?</text>
  <text x="600" y="730" class="text-small">(Kritisk sti-beregning)</text>

  <!-- NO path - Error 3 -->
  <path d="M 450 700 L 280 700" class="arrow-error"/>
  <text x="360" y="690" class="label-error">NEI</text>
  <rect x="50" y="660" width="230" height="100" rx="8" class="box-error"/>
  <text x="165" y="690" class="text" fill="#DC2626" font-weight="bold">❌ Feil: Forsinket</text>
  <text x="165" y="710" class="text-small">Forventet slutt: 20. mai 2026</text>
  <text x="165" y="728" class="text-small">Frist: 15. mai 2026</text>
  <text x="165" y="746" class="text-small" font-weight="bold">Forsinkelse: +5 dager</text>

  <!-- YES path - Success! -->
  <path d="M 600 770 L 600 820" class="arrow-success"/>
  <text x="620" y="800" class="label-success">JA</text>

  <!-- Success box -->
  <rect x="400" y="820" width="400" height="60" rx="12" class="box-success"/>
  <text x="600" y="850" class="text" fill="#16A34A" font-size="18" font-weight="bold">✅ Plan Godkjent!</text>
  <text x="600" y="870" class="text-small">Alle krav oppfylt - Vis suksessmelding</text>

  <!-- Right side: Error handling flow -->
  <rect x="850" y="200" width="300" height="580" rx="12" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2"/>
  <text x="1000" y="235" class="text" font-weight="bold">Feilhåndtering</text>

  <!-- Error modal example -->
  <rect x="880" y="260" width="240" height="200" rx="8" fill="#FEE2E2" stroke="#DC2626" stroke-width="1"/>
  <text x="1000" y="285" class="text" fill="#DC2626" font-size="15" font-weight="bold">⚠️ Valideringsfeil</text>
  <line x1="900" y1="295" x2="1100" y2="295" stroke="#DC2626" stroke-width="1"/>

  <text x="1000" y="320" class="text-small">Planen din overskrider budsjettet:</text>
  <text x="1000" y="345" class="text-small" font-weight="bold">Total: 715 MNOK</text>
  <text x="1000" y="365" class="text-small" font-weight="bold">Budsjett: 700 MNOK</text>
  <text x="1000" y="385" class="text-small" font-weight="bold" fill="#DC2626">Reduser: -15 MNOK</text>

  <text x="1000" y="410" class="text-small">Oppgaver med høyest kostnad:</text>
  <text x="1000" y="428" class="text-small">1. Råbygg: 180 MNOK</text>
  <text x="1000" y="443" class="text-small">2. Grunnarbeid: 105 MNOK</text>

  <rect x="920" y="480" width="160" height="35" rx="6" fill="#2563EB"/>
  <text x="1000" y="503" class="text" fill="#FFFFFF" font-weight="bold">Lukk og forhandl</text>

  <rect x="920" y="525" width="160" height="35" rx="6" fill="#DC2626"/>
  <text x="1000" y="548" class="text" fill="#FFFFFF">Nullstill plan</text>

  <!-- Recommendations -->
  <text x="1000" y="595" class="text" font-weight="bold">Anbefalinger:</text>
  <text x="890" y="620" class="text-small" text-anchor="start">1. Gå tilbake til dyre WBS-oppgaver</text>
  <text x="890" y="640" class="text-small" text-anchor="start">2. Forhandl på nytt med leverandører</text>
  <text x="890" y="660" class="text-small" text-anchor="start">3. Reduser varighet (reduserer kostnad)</text>
  <text x="890" y="680" class="text-small" text-anchor="start">4. Optimaliser avhengigheter</text>
  <text x="890" y="700" class="text-small" text-anchor="start">5. Kontakt prosjekteier (budsjettøkning)</text>

  <!-- Loop back indicator -->
  <path d="M 165 340 L 165 380 L 350 380 L 350 140 L 450 140" class="arrow-error" stroke-dasharray="5,5"/>
  <text x="240" y="370" class="label-error">← Forhandl på nytt</text>

  <!-- Legend -->
  <rect x="50" y="830" width="120" height="50" rx="6" fill="#F9FAFB" stroke="#D1D5DB" stroke-width="1"/>
  <text x="110" y="848" class="text-small" font-weight="bold">Validering</text>
  <path d="M 60 855 L 160 855" class="arrow-success"/>
  <text x="110" y="870" class="text-small">Suksess-sti</text>
  <path d="M 60 873 L 160 873" class="arrow-error"/>
</svg>